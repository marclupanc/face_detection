{"ast":null,"code":"import { __awaiter, __extends, __generator } from \"tslib\";\nimport { FaceDetection } from '../classes';\nimport { TinyYolov2Base } from '../tinyYolov2/TinyYolov2Base';\nimport { BOX_ANCHORS, IOU_THRESHOLD, MEAN_RGB } from './const';\n\nvar TinyFaceDetector =\n/** @class */\nfunction (_super) {\n  __extends(TinyFaceDetector, _super);\n\n  function TinyFaceDetector() {\n    var _this = this;\n\n    var config = {\n      withSeparableConvs: true,\n      iouThreshold: IOU_THRESHOLD,\n      classes: ['face'],\n      anchors: BOX_ANCHORS,\n      meanRgb: MEAN_RGB,\n      isFirstLayerConv2d: true,\n      filterSizes: [3, 16, 32, 64, 128, 256, 512]\n    };\n    _this = _super.call(this, config) || this;\n    return _this;\n  }\n\n  Object.defineProperty(TinyFaceDetector.prototype, \"anchors\", {\n    get: function () {\n      return this.config.anchors;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  TinyFaceDetector.prototype.locateFaces = function (input, forwardParams) {\n    return __awaiter(this, void 0, void 0, function () {\n      var objectDetections;\n      return __generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            return [4\n            /*yield*/\n            , this.detect(input, forwardParams)];\n\n          case 1:\n            objectDetections = _a.sent();\n            return [2\n            /*return*/\n            , objectDetections.map(function (det) {\n              return new FaceDetection(det.score, det.relativeBox, {\n                width: det.imageWidth,\n                height: det.imageHeight\n              });\n            })];\n        }\n      });\n    });\n  };\n\n  TinyFaceDetector.prototype.getDefaultModelName = function () {\n    return 'tiny_face_detector_model';\n  };\n\n  TinyFaceDetector.prototype.extractParamsFromWeigthMap = function (weightMap) {\n    return _super.prototype.extractParamsFromWeigthMap.call(this, weightMap);\n  };\n\n  return TinyFaceDetector;\n}(TinyYolov2Base);\n\nexport { TinyFaceDetector };","map":{"version":3,"mappings":";AAEA,SAASA,aAAT,QAAqC,YAArC;AAIA,SAASC,cAAT,QAA+B,8BAA/B;AAEA,SAASC,WAAT,EAAsBC,aAAtB,EAAqCC,QAArC,QAAqD,SAArD;;AAEA;AAAA;AAAA;EAAsCC;;EAEpC;IAAA;;IACE,IAAMC,MAAM,GAAG;MACbC,kBAAkB,EAAE,IADP;MAEbC,YAAY,EAAEL,aAFD;MAGbM,OAAO,EAAE,CAAC,MAAD,CAHI;MAIbC,OAAO,EAAER,WAJI;MAKbS,OAAO,EAAEP,QALI;MAMbQ,kBAAkB,EAAE,IANP;MAObC,WAAW,EAAE,CAAC,CAAD,EAAI,EAAJ,EAAQ,EAAR,EAAY,EAAZ,EAAgB,GAAhB,EAAqB,GAArB,EAA0B,GAA1B;IAPA,CAAf;IAUAC,0BAAMR,MAAN,KAAa,IAAb;;EACD;;EAEDS,sBAAWC,0BAAX,EAAW,SAAX,EAAkB;SAAlB;MACE,OAAO,KAAKV,MAAL,CAAYI,OAAnB;IACD,CAFiB;oBAAA;;EAAA,CAAlB;;EAIaM,yCAAb,UAAyBC,KAAzB,EAA2CC,aAA3C,EAA4E;;;;;;YACjD;YAAA;YAAA,EAAM,KAAKC,MAAL,CAAYF,KAAZ,EAAmBC,aAAnB,CAAN;;;YAAnBE,gBAAgB,GAAGC,SAAnB;YACN;YAAA;YAAA,EAAOD,gBAAgB,CAACE,GAAjB,CAAqB,eAAG;cAAI,WAAItB,aAAJ,CAAkBuB,GAAG,CAACC,KAAtB,EAA6BD,GAAG,CAACE,WAAjC,EAA8C;gBAAEC,KAAK,EAAEH,GAAG,CAACI,UAAb;gBAAyBC,MAAM,EAAEL,GAAG,CAACM;cAArC,CAA9C;YAAiG,CAA7H,CAAP;;;;EACD,CAHY;;EAKHb,iDAAV;IACE,OAAO,0BAAP;EACD,CAFS;;EAIAA,wDAAV,UAAqCc,SAArC,EAAiE;IAC/D,OAAOC,iBAAMC,0BAAN,CAAgCC,IAAhC,CAAgC,IAAhC,EAAiCH,SAAjC,CAAP;EACD,CAFS;;EAGZ;AAAC,CAhCD,CAAsC7B,cAAtC","names":["FaceDetection","TinyYolov2Base","BOX_ANCHORS","IOU_THRESHOLD","MEAN_RGB","__extends","config","withSeparableConvs","iouThreshold","classes","anchors","meanRgb","isFirstLayerConv2d","filterSizes","_this","Object","TinyFaceDetector","input","forwardParams","detect","objectDetections","_a","map","det","score","relativeBox","width","imageWidth","height","imageHeight","weightMap","_super","extractParamsFromWeigthMap","call"],"sources":["../../../src/tinyFaceDetector/TinyFaceDetector.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}