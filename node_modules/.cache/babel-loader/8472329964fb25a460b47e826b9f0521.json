{"ast":null,"code":"import * as tf from '@tensorflow/tfjs-core';\nimport { fullyConnectedLayer } from '../common/fullyConnectedLayer';\nimport { prelu } from './prelu';\nimport { sharedLayer } from './sharedLayers';\nexport function RNet(x, params) {\n  return tf.tidy(function () {\n    var convOut = sharedLayer(x, params);\n    var vectorized = tf.reshape(convOut, [convOut.shape[0], params.fc1.weights.shape[0]]);\n    var fc1 = fullyConnectedLayer(vectorized, params.fc1);\n    var prelu4 = prelu(fc1, params.prelu4_alpha);\n    var fc2_1 = fullyConnectedLayer(prelu4, params.fc2_1);\n    var max = tf.expandDims(tf.max(fc2_1, 1), 1);\n    var prob = tf.softmax(tf.sub(fc2_1, max), 1);\n    var regions = fullyConnectedLayer(prelu4, params.fc2_2);\n    var scores = tf.unstack(prob, 1)[1];\n    return {\n      scores: scores,\n      regions: regions\n    };\n  });\n}","map":{"version":3,"mappings":"AAAA,OAAO,KAAKA,EAAZ,MAAoB,uBAApB;AAEA,SAASC,mBAAT,QAAoC,+BAApC;AACA,SAASC,KAAT,QAAsB,SAAtB;AACA,SAASC,WAAT,QAA4B,gBAA5B;AAGA,OAAM,SAAUC,IAAV,CAAeC,CAAf,EAA+BC,MAA/B,EAAiD;EACrD,OAAON,EAAE,CAACO,IAAH,CAAQ;IAEb,IAAMC,OAAO,GAAGL,WAAW,CAACE,CAAD,EAAIC,MAAJ,CAA3B;IACA,IAAMG,UAAU,GAAGT,EAAE,CAACU,OAAH,CAAWF,OAAX,EAAoB,CAACA,OAAO,CAACG,KAAR,CAAc,CAAd,CAAD,EAAmBL,MAAM,CAACM,GAAP,CAAWC,OAAX,CAAmBF,KAAnB,CAAyB,CAAzB,CAAnB,CAApB,CAAnB;IACA,IAAMC,GAAG,GAAGX,mBAAmB,CAACQ,UAAD,EAAaH,MAAM,CAACM,GAApB,CAA/B;IACA,IAAME,MAAM,GAAGZ,KAAK,CAAcU,GAAd,EAAmBN,MAAM,CAACS,YAA1B,CAApB;IACA,IAAMC,KAAK,GAAGf,mBAAmB,CAACa,MAAD,EAASR,MAAM,CAACU,KAAhB,CAAjC;IACA,IAAMC,GAAG,GAAGjB,EAAE,CAACkB,UAAH,CAAclB,EAAE,CAACiB,GAAH,CAAOD,KAAP,EAAc,CAAd,CAAd,EAAgC,CAAhC,CAAZ;IACA,IAAMG,IAAI,GAAGnB,EAAE,CAACoB,OAAH,CAAWpB,EAAE,CAACqB,GAAH,CAAOL,KAAP,EAAcC,GAAd,CAAX,EAA+B,CAA/B,CAAb;IACA,IAAMK,OAAO,GAAGrB,mBAAmB,CAACa,MAAD,EAASR,MAAM,CAACiB,KAAhB,CAAnC;IAEA,IAAMC,MAAM,GAAGxB,EAAE,CAACyB,OAAH,CAAWN,IAAX,EAAiB,CAAjB,EAAoB,CAApB,CAAf;IACA,OAAO;MAAEK,MAAM,QAAR;MAAUF,OAAO;IAAjB,CAAP;EACD,CAbM,CAAP;AAcD","names":["tf","fullyConnectedLayer","prelu","sharedLayer","RNet","x","params","tidy","convOut","vectorized","reshape","shape","fc1","weights","prelu4","prelu4_alpha","fc2_1","max","expandDims","prob","softmax","sub","regions","fc2_2","scores","unstack"],"sources":["../../../src/mtcnn/RNet.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}