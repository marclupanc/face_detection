{"ast":null,"code":"import { iou } from './iou';\nexport function nonMaxSuppression(boxes, scores, iouThreshold, isIOU) {\n  if (isIOU === void 0) {\n    isIOU = true;\n  }\n\n  var indicesSortedByScore = scores.map(function (score, boxIndex) {\n    return {\n      score: score,\n      boxIndex: boxIndex\n    };\n  }).sort(function (c1, c2) {\n    return c1.score - c2.score;\n  }).map(function (c) {\n    return c.boxIndex;\n  });\n  var pick = [];\n\n  var _loop_1 = function () {\n    var curr = indicesSortedByScore.pop();\n    pick.push(curr);\n    var indices = indicesSortedByScore;\n    var outputs = [];\n\n    for (var i = 0; i < indices.length; i++) {\n      var idx = indices[i];\n      var currBox = boxes[curr];\n      var idxBox = boxes[idx];\n      outputs.push(iou(currBox, idxBox, isIOU));\n    }\n\n    indicesSortedByScore = indicesSortedByScore.filter(function (_, j) {\n      return outputs[j] <= iouThreshold;\n    });\n  };\n\n  while (indicesSortedByScore.length > 0) {\n    _loop_1();\n  }\n\n  return pick;\n}","map":{"version":3,"mappings":"AACA,SAASA,GAAT,QAAoB,OAApB;AAEA,OAAM,SAAUC,iBAAV,CACJC,KADI,EAEJC,MAFI,EAGJC,YAHI,EAIJC,KAJI,EAIiB;EAArB;IAAAA;EAAqB;;EAGrB,IAAIC,oBAAoB,GAAGH,MAAM,CAC9BI,GADwB,CACpB,UAACC,KAAD,EAAQC,QAAR,EAAgB;IAAK,OAAC;MAAED,KAAK,OAAP;MAASC,QAAQ;IAAjB,CAAD;EAAqB,CADtB,EAExBC,IAFwB,CAEnB,UAACC,EAAD,EAAKC,EAAL,EAAO;IAAK,SAAE,CAACJ,KAAH,GAAWI,EAAE,CAACJ,KAAd;EAAmB,CAFZ,EAGxBD,GAHwB,CAGpB,aAAC;IAAI,QAAC,CAACE,QAAF;EAAU,CAHK,CAA3B;EAKA,IAAMI,IAAI,GAAa,EAAvB;;;IAGE,IAAMC,IAAI,GAAGR,oBAAoB,CAACS,GAArB,EAAb;IACAF,IAAI,CAACG,IAAL,CAAUF,IAAV;IAEA,IAAMG,OAAO,GAAGX,oBAAhB;IAEA,IAAMY,OAAO,GAAa,EAA1B;;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAAO,CAACG,MAA5B,EAAoCD,CAAC,EAArC,EAAyC;MACvC,IAAME,GAAG,GAAGJ,OAAO,CAACE,CAAD,CAAnB;MAEA,IAAMG,OAAO,GAAGpB,KAAK,CAACY,IAAD,CAArB;MACA,IAAMS,MAAM,GAAGrB,KAAK,CAACmB,GAAD,CAApB;MAEAH,OAAO,CAACF,IAAR,CAAahB,GAAG,CAACsB,OAAD,EAAUC,MAAV,EAAkBlB,KAAlB,CAAhB;IACD;;IAEDC,oBAAoB,GAAGA,oBAAoB,CAACkB,MAArB,CACrB,UAACC,CAAD,EAAIC,CAAJ,EAAK;MAAK,cAAO,CAACA,CAAD,CAAP,IAActB,YAAd;IAA0B,CADf,CAAvB;;;EAhBF,OAAME,oBAAoB,CAACc,MAArB,GAA8B,CAApC,EAAqC;;EAmBpC;;EAED,OAAOP,IAAP;AAED","names":["iou","nonMaxSuppression","boxes","scores","iouThreshold","isIOU","indicesSortedByScore","map","score","boxIndex","sort","c1","c2","pick","curr","pop","push","indices","outputs","i","length","idx","currBox","idxBox","filter","_","j"],"sources":["../../../src/ops/nonMaxSuppression.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}