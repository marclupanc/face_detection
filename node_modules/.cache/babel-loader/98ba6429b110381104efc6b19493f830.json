{"ast":null,"code":"import { env } from '../env';\nexport function bufferToImage(buf) {\n  return new Promise(function (resolve, reject) {\n    if (!(buf instanceof Blob)) {\n      return reject('bufferToImage - expected buf to be of type: Blob');\n    }\n\n    var reader = new FileReader();\n\n    reader.onload = function () {\n      if (typeof reader.result !== 'string') {\n        return reject('bufferToImage - expected reader.result to be a string, in onload');\n      }\n\n      var img = env.getEnv().createImageElement();\n\n      img.onload = function () {\n        return resolve(img);\n      };\n\n      img.onerror = reject;\n      img.src = reader.result;\n    };\n\n    reader.onerror = reject;\n    reader.readAsDataURL(buf);\n  });\n}","map":{"version":3,"mappings":"AAAA,SAASA,GAAT,QAAoB,QAApB;AAEA,OAAM,SAAUC,aAAV,CAAwBC,GAAxB,EAAiC;EACrC,OAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAgB;IACjC,IAAI,EAAEH,GAAG,YAAYI,IAAjB,CAAJ,EAA4B;MAC1B,OAAOD,MAAM,CAAC,kDAAD,CAAb;IACD;;IAED,IAAME,MAAM,GAAG,IAAIC,UAAJ,EAAf;;IACAD,MAAM,CAACE,MAAP,GAAgB;MACd,IAAI,OAAOF,MAAM,CAACG,MAAd,KAAyB,QAA7B,EAAuC;QACrC,OAAOL,MAAM,CAAC,kEAAD,CAAb;MACD;;MAED,IAAMM,GAAG,GAAGX,GAAG,CAACY,MAAJ,GAAaC,kBAAb,EAAZ;;MACAF,GAAG,CAACF,MAAJ,GAAa;QAAM,cAAO,CAACE,GAAD,CAAP;MAAY,CAA/B;;MACAA,GAAG,CAACG,OAAJ,GAAcT,MAAd;MACAM,GAAG,CAACI,GAAJ,GAAUR,MAAM,CAACG,MAAjB;IACD,CATD;;IAUAH,MAAM,CAACO,OAAP,GAAiBT,MAAjB;IACAE,MAAM,CAACS,aAAP,CAAqBd,GAArB;EACD,CAlBM,CAAP;AAmBD","names":["env","bufferToImage","buf","Promise","resolve","reject","Blob","reader","FileReader","onload","result","img","getEnv","createImageElement","onerror","src","readAsDataURL"],"sources":["../../../src/dom/bufferToImage.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}