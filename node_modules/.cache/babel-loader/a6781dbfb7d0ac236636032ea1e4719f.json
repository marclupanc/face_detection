{"ast":null,"code":"import { env } from '../env';\nimport { isMediaLoaded } from './isMediaLoaded';\nexport function awaitMediaLoaded(media) {\n  return new Promise(function (resolve, reject) {\n    if (media instanceof env.getEnv().Canvas || isMediaLoaded(media)) {\n      return resolve();\n    }\n\n    function onLoad(e) {\n      if (!e.currentTarget) return;\n      e.currentTarget.removeEventListener('load', onLoad);\n      e.currentTarget.removeEventListener('error', onError);\n      resolve(e);\n    }\n\n    function onError(e) {\n      if (!e.currentTarget) return;\n      e.currentTarget.removeEventListener('load', onLoad);\n      e.currentTarget.removeEventListener('error', onError);\n      reject(e);\n    }\n\n    media.addEventListener('load', onLoad);\n    media.addEventListener('error', onError);\n  });\n}","map":{"version":3,"mappings":"AAAA,SAASA,GAAT,QAAoB,QAApB;AACA,SAASC,aAAT,QAA8B,iBAA9B;AAEA,OAAM,SAAUC,gBAAV,CAA2BC,KAA3B,EAAyF;EAE7F,OAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAgB;IACjC,IAAIH,KAAK,YAAYH,GAAG,CAACO,MAAJ,GAAaC,MAA9B,IAAwCP,aAAa,CAACE,KAAD,CAAzD,EAAkE;MAChE,OAAOE,OAAO,EAAd;IACD;;IAED,SAASI,MAAT,CAAgBC,CAAhB,EAAwB;MACtB,IAAI,CAACA,CAAC,CAACC,aAAP,EAAsB;MACtBD,CAAC,CAACC,aAAF,CAAgBC,mBAAhB,CAAoC,MAApC,EAA4CH,MAA5C;MACAC,CAAC,CAACC,aAAF,CAAgBC,mBAAhB,CAAoC,OAApC,EAA6CC,OAA7C;MACAR,OAAO,CAACK,CAAD,CAAP;IACD;;IAED,SAASG,OAAT,CAAiBH,CAAjB,EAAyB;MACvB,IAAI,CAACA,CAAC,CAACC,aAAP,EAAsB;MACtBD,CAAC,CAACC,aAAF,CAAgBC,mBAAhB,CAAoC,MAApC,EAA4CH,MAA5C;MACAC,CAAC,CAACC,aAAF,CAAgBC,mBAAhB,CAAoC,OAApC,EAA6CC,OAA7C;MACAP,MAAM,CAACI,CAAD,CAAN;IACD;;IAEDP,KAAK,CAACW,gBAAN,CAAuB,MAAvB,EAA+BL,MAA/B;IACAN,KAAK,CAACW,gBAAN,CAAuB,OAAvB,EAAgCD,OAAhC;EACD,CArBM,CAAP;AAsBD","names":["env","isMediaLoaded","awaitMediaLoaded","media","Promise","resolve","reject","getEnv","Canvas","onLoad","e","currentTarget","removeEventListener","onError","addEventListener"],"sources":["../../../src/dom/awaitMediaLoaded.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}