{"ast":null,"code":"import { env } from '../env';\nimport { createCanvas, createCanvasFromMedia } from './createCanvas';\nimport { getContext2dOrThrow } from './getContext2dOrThrow';\nimport { getMediaDimensions } from './getMediaDimensions';\nexport function imageToSquare(input, inputSize, centerImage) {\n  if (centerImage === void 0) {\n    centerImage = false;\n  }\n\n  var _a = env.getEnv(),\n      Image = _a.Image,\n      Canvas = _a.Canvas;\n\n  if (!(input instanceof Image || input instanceof Canvas)) {\n    throw new Error('imageToSquare - expected arg0 to be HTMLImageElement | HTMLCanvasElement');\n  }\n\n  var dims = getMediaDimensions(input);\n  var scale = inputSize / Math.max(dims.height, dims.width);\n  var width = scale * dims.width;\n  var height = scale * dims.height;\n  var targetCanvas = createCanvas({\n    width: inputSize,\n    height: inputSize\n  });\n  var inputCanvas = input instanceof Canvas ? input : createCanvasFromMedia(input);\n  var offset = Math.abs(width - height) / 2;\n  var dx = centerImage && width < height ? offset : 0;\n  var dy = centerImage && height < width ? offset : 0;\n  getContext2dOrThrow(targetCanvas).drawImage(inputCanvas, dx, dy, width, height);\n  return targetCanvas;\n}","map":{"version":3,"mappings":"AAAA,SAASA,GAAT,QAAoB,QAApB;AACA,SAASC,YAAT,EAAuBC,qBAAvB,QAAoD,gBAApD;AACA,SAASC,mBAAT,QAAoC,uBAApC;AACA,SAASC,kBAAT,QAAmC,sBAAnC;AAEA,OAAM,SAAUC,aAAV,CAAwBC,KAAxB,EAAqEC,SAArE,EAAwFC,WAAxF,EAAoH;EAA5B;IAAAA;EAA4B;;EAElH;EAAA,IAAEC,gBAAF;EAAA,IAASC,kBAAT;;EAEN,IAAI,EAAEJ,KAAK,YAAYG,KAAjB,IAA0BH,KAAK,YAAYI,MAA7C,CAAJ,EAA0D;IACxD,MAAM,IAAIC,KAAJ,CAAU,0EAAV,CAAN;EACD;;EAED,IAAMC,IAAI,GAAGR,kBAAkB,CAACE,KAAD,CAA/B;EACA,IAAMO,KAAK,GAAGN,SAAS,GAAGO,IAAI,CAACC,GAAL,CAASH,IAAI,CAACI,MAAd,EAAsBJ,IAAI,CAACK,KAA3B,CAA1B;EACA,IAAMA,KAAK,GAAGJ,KAAK,GAAGD,IAAI,CAACK,KAA3B;EACA,IAAMD,MAAM,GAAGH,KAAK,GAAGD,IAAI,CAACI,MAA5B;EAEA,IAAME,YAAY,GAAGjB,YAAY,CAAC;IAAEgB,KAAK,EAAEV,SAAT;IAAoBS,MAAM,EAAET;EAA5B,CAAD,CAAjC;EACA,IAAMY,WAAW,GAAGb,KAAK,YAAYI,MAAjB,GAA0BJ,KAA1B,GAAkCJ,qBAAqB,CAACI,KAAD,CAA3E;EAEA,IAAMc,MAAM,GAAGN,IAAI,CAACO,GAAL,CAASJ,KAAK,GAAGD,MAAjB,IAA2B,CAA1C;EACA,IAAMM,EAAE,GAAGd,WAAW,IAAIS,KAAK,GAAGD,MAAvB,GAAgCI,MAAhC,GAAyC,CAApD;EACA,IAAMG,EAAE,GAAGf,WAAW,IAAIQ,MAAM,GAAGC,KAAxB,GAAgCG,MAAhC,GAAyC,CAApD;EACAjB,mBAAmB,CAACe,YAAD,CAAnB,CAAkCM,SAAlC,CAA4CL,WAA5C,EAAyDG,EAAzD,EAA6DC,EAA7D,EAAiEN,KAAjE,EAAwED,MAAxE;EAEA,OAAOE,YAAP;AACD","names":["env","createCanvas","createCanvasFromMedia","getContext2dOrThrow","getMediaDimensions","imageToSquare","input","inputSize","centerImage","Image","Canvas","Error","dims","scale","Math","max","height","width","targetCanvas","inputCanvas","offset","abs","dx","dy","drawImage"],"sources":["../../../src/dom/imageToSquare.ts"],"sourcesContent":[null]},"metadata":{},"sourceType":"module"}